# 一、类加载子系统

![image-20200927203353315](https://gitee.com/likeloveC/picture_bed/raw/master/img/8.26/20200927203353.png)



## 1.类加载器的作用：

![image-20200927204938145](https://gitee.com/likeloveC/picture_bed/raw/master/img/8.26/20200927204938.png)

![image-20200927210810471](https://gitee.com/likeloveC/picture_bed/raw/master/img/8.26/20200927210810.png)



## 2.类加载过程

### 	a.加载-loading

1.  通过一个类的全限定名获取定义此类的二进制字节流
2.  将这个字节流所代表的静态储存结构转化为方法区的运行时数据结构
3.  ==将内存中生成一个代表这个类的Java.lang.Class对象==，作为方法区这个类的各种数据的访问入口



![image-20200927211312833](https://gitee.com/likeloveC/picture_bed/raw/master/img/8.26/20200927211312.png)



### 	b.链接-linking

-   验证(verify):
    -   确保class文件的字节流中包含信息符合当前虚拟机要求，保证被加载类的正确性。
    -   文件格式验证，元数据验证，字节码验证，符号引用验证
-   准备(prepare):
    -   为类变量分配内存并且设置该类变量的默认初始值，即0
    -   ==不包含被final修饰的static，应为final在编译的时候就会分配了，准备阶段会显示初始化==，
    -   ==不会为实例变量分配初始化==，类变量会分配在方法区中，而实例变量是会随着对象一起分配到Java堆中。
-   解析(resolve):
    -   将常量池内的符号内容引用转换为直接引用的流程
    -   解析操作往往会伴随则JVM在执行完初始化之后在执行
    -   ==符号引用==就是一组符号来描述所引用的目标。
    -   ==直接引用==就是直接指向目标的指针，相对偏移量或一个间接定位到目标的句柄
    -   解析动作主要针对类或接口，字段，类方法，接口方法，方法类型等
    -   CONSTANT_Class_info,CONSTANT_Fieldref_info,CONSTANT_Mehodref_info等